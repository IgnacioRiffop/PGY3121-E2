{% extends 'core/base.html' %}
{% load static%}
{% load crispy_forms_tags %}

{% block css %}
  
{% endblock %}

<!-- INICIO CONTENIDO-->
{% block contenido %}

<!-- Contenido -->
<div class="container py-5">
    <div class="row">
        <!-- Lateral izq -->
        <div class="col-sm-5">
            <div class="row perfil">
                <div class="col-sm-12 bg-white p-5 rounded-4 text-dark shadow">
                    <form action="{% url 'voucher' %}" method="POST">
                        <h5>Hola, Ignacio</h5>
                        <p>Ingresa los datos para completar tu compra.</p>
                        {% csrf_token %}
                        {{ form | crispy }}
                        <br>
                        <h6>Subtotal: ${{subtotal}}</h6>
                        <h6>Descuento: ${{descuento}}</h6>
                        <h6>Envio: ${{envio}}</h6>
                        <h6>Total: ${{total}}</h6>
                        <input type="submit" class="btn btn-verde" value="Pagar">
                    </form>
                </div>
            </div>
            <div class="col-sm-12">
            </div>
        </div>
        <!-- Fin Lateral izq -->

        <!-- Lateral der -->
        <div class="col-sm-7">
            <h5 class="">Carrito</h5>
            {% if existe == False %}
                <h5 class="text-muted">No hay ningún producto añadido.</h5>
            {% endif %}
            {% for carrito in listado %}
                <div class="card mb-3" style="max-width: 540px;">
                    <div class="row g-0">
                        <div class="col-md-4">
                            <img src="{{ carrito.producto.imagen.url }}" class="img-fluid rounded-start" alt="...">
                        </div>
                        <div class="col-md-8">
                            <div class="card-body">
                                <h5 class="card-title">{{ carrito.producto.nombre }}</h5>
                                <p class="card-text">${{ carrito.producto.precio }}</p>
                                <div class="row">
                                    <h6 class="text-muted">Cantidad: {{ carrito.cantidad }}</h6>
                                </div>
                                <a onclick="deleteCarrito({{ carrito.id }})" class="btn btn-danger btn-sm">Quitar</a>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
        <!-- Fin Lateral der -->
    </div>
</div>
<!-- Fin Contenido -->

{% endblock %}
<!-- FIN CONTENIDO -->
{% block js %}
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="{% static 'core/js/mensajeCarrito.js' %}"></script>
{% endblock %}